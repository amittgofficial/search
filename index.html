<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Search Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
      transition: 0.3s ease;
    }

    body {
      margin: 0;
      padding: 20px;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    h2 {
      text-align: center;
      font-size: 28px;
      letter-spacing: 1px;
      margin-bottom: 20px;
      animation: fadeIn 1s ease;
    }

    .search-bar {
      display: flex;
      justify-content: center;
      margin-bottom: 15px;
      animation: slideIn 0.6s ease;
    }

    .search-bar input {
      padding: 12px 20px;
      width: 300px;
      font-size: 15px;
      border: none;
      border-radius: 30px;
      outline: none;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      box-shadow: inset 0 0 5px #00c6ff88;
    }

    .search-bar input::placeholder {
      color: #ccc;
    }

    .filters {
      text-align: center;
      margin-bottom: 20px;
    }

    .filters button {
      background: #ffffff11;
      border: 1px solid #ffffff22;
      padding: 8px 16px;
      margin: 5px;
      font-size: 13px;
      border-radius: 20px;
      color: #fff;
      cursor: pointer;
      transition: 0.3s;
    }

    .filters button:hover {
      background: #00c6ff33;
      transform: scale(1.05);
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0 20px;
    }

    .action-buttons button {
      padding: 12px 22px;
      font-size: 15px;
      border: none;
      border-radius: 30px;
      color: white;
      cursor: pointer;
      transition: all 0.2s ease-in-out;
      animation: pulse 2s infinite;
      box-shadow: 0 4px 12px rgba(0, 198, 255, 0.3);
    }

    .action-buttons button:active {
      transform: scale(0.95);
      animation: pressed 0.2s;
    }

    

    #results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      position: relative;
    }

    .video-card {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(6px);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      animation: fadeIn 0.5s ease;
    }

    .video-card img.thumbnail {
      width: 100%;
      height: auto;
    }

    .video-info {
      padding: 15px;
    }

    .video-info h3 {
      font-size: 16px;
      margin: 5px 0 10px;
    }

    .channel-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 5px;
      cursor: pointer;
    }

    .channel-row img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 2px solid #ffffff33;
    }

    .channel-row p {
      margin: 0;
      font-weight: bold;
    }

    .channel-row a {
      font-size: 12px;
      color: #00c6ff;
      text-decoration: none;
    }

    .copy-btn {
      margin-top: 10px;
      padding: 8px 14px;
      background: #00c6ff33;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
    }

    .copy-btn:hover {
      background: #00c6ff88;
    }

    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #00c6ff;
      color: white;
      padding: 10px 20px;
      border-radius: 30px;
      opacity: 0;
      pointer-events: none;
      transition: 0.3s ease;
      z-index: 999;
    }

    .toast.show {
      opacity: 1;
    }

    @media (max-width: 600px) {
      .search-bar {
        flex-direction: column;
        align-items: center;
      }

      .action-buttons {
        flex-direction: column;
        align-items: center;
      }

      .action-buttons button {
        width: 80%;
        margin-bottom: 10px;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 10px #00c6ff55; }
      50% { box-shadow: 0 0 20px #00c6ff; }
    }

    @keyframes pressed {
      0% { filter: brightness(1.1); }
      100% { filter: brightness(0.9); }
    }
  </style>
</head>
<body>

  <h2>üîç Search</h2>

  <div class="search-bar">
    <input type="text" id="searchQuery" placeholder="Enter search tag..." />
  </div>

  <div class="action-buttons">
    <button onclick="searchVideos()" class="search-btn"></button>
    <button onclick="clearResults()" class="clear-btn"></button>
  </div>

  <div class="filters">
    <button onclick="setFilter('all')"></button>
    <button onclick="setFilter('today')"></button>
    <button onclick="setFilter('hour')">Last Hour</button>
  </div>

  <div id="results"></div>
  <div id="toast" class="toast">Copied to clipboard</div>

  <script>
    const apiKey = 'AIzaSyDFvv93DEI4LG-uCwR8EGWm1lQ_i6Ob1n8';
    let currentFilter = 'all';

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.innerText = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2500);
    }

    function setFilter(f) {
      currentFilter = f;
      searchVideos();
    }

    function timeAgo(dateString) {
      const now = new Date();
      const posted = new Date(dateString);
      const diffMs = now - posted;
      const mins = Math.floor(diffMs / 60000);
      if (mins < 60) return `${mins} min ago`;
      const hrs = Math.floor(mins / 60);
      if (hrs < 24) return `${hrs} hrs ago`;
      const days = Math.floor(hrs / 24);
      return `${days} days ago`;
    }

    async function searchVideos(channelId = null) {
      const query = document.getElementById('searchQuery').value.trim();
      const resultsDiv = document.getElementById('results');
      let url = "";

      let publishedAfter = "";
      if (currentFilter === "hour") {
        const d = new Date(Date.now() - 60 * 60 * 1000);
        publishedAfter = `&publishedAfter=${d.toISOString()}`;
      } else if (currentFilter === "today") {
        const d = new Date();
        d.setHours(0, 0, 0, 0);
        publishedAfter = `&publishedAfter=${d.toISOString()}`;
      }

      if (channelId) {
        url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=10&order=date&channelId=${channelId}${publishedAfter}&key=${apiKey}`;
      } else {
        if (!query) {
          showToast("Please enter a search keyword.");
          return;
        }
        url = `https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=10&q=${encodeURIComponent(query)}${publishedAfter}&key=${apiKey}`;
      }

      resultsDiv.innerHTML = "<p style='text-align:center;'>Loading...</p>";

      try {
        const res = await fetch(url);
        const data = await res.json();

        if (!data.items || data.items.length === 0) {
          resultsDiv.innerHTML = "";
          showToast("No results found.");
          return;
        }

        resultsDiv.innerHTML = "";

        for (const item of data.items) {
          const videoId = item.id.videoId;
          const { title, channelTitle, thumbnails, publishedAt, channelId } = item.snippet;
          const videoUrl = `https://youtu.be/${videoId}`;
          const thumbnail = thumbnails.medium.url;

          const channelRes = await fetch(`https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${channelId}&key=${apiKey}`);
          const channelData = await channelRes.json();
          const channelLogo = channelData.items[0].snippet.thumbnails.default.url;
          const channelUrl = `https://www.youtube.com/channel/${channelId}`;

          const card = document.createElement('div');
          card.className = 'video-card';
          card.innerHTML = `
            <img src="${thumbnail}" class="thumbnail">
            <div class="video-info">
              <h3>${title}</h3>
              <div class="channel-row" onclick="searchVideos('${channelId}')">
                <img src="${channelLogo}" title="Click to show ${channelTitle} videos">
                <div>
                  <p>${channelTitle}</p>
                  <a href="${channelUrl}" target="_blank">Subscribe</a>
                </div>
              </div>
              <p>üïí ${timeAgo(publishedAt)}</p>
              <button class="copy-btn" onclick="copyToClipboard('${videoUrl}')">Copy Link</button>
            </div>
          `;
          resultsDiv.appendChild(card);
        }
      } catch (err) {
        resultsDiv.innerHTML = "";
        console.error(err);
        showToast("Error fetching videos.");
      }
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        showToast("Copied to clipboard");
      });
    }

    function clearResults() {
      document.getElementById('searchQuery').value = '';
      document.getElementById('results').innerHTML = '';
      showToast("Cleared all results");
    }
  </script>

</body>
</html>
